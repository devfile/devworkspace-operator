name: "Does not create persistent home volume if a volume already named 'persistentHome'"

input:
  devworkspaceId: "test-workspaceid"
  config:
    workspace:
      persistUserHome:
        enabled: true
  workspace:
    components:
      - name: testing-container-1
        container:
          image: testing-image-1
          volumeMounts:
            - name: my-defined-volume
              path: /my-defined-volume-path
            - name: persistentHome
              path: /some/path
      - name: testing-container-2
        container:
          image: testing-image-2
          volumeMounts: 
            - name: my-defined-volume
              path: /my-defined-volume-path
      - name: my-defined-volume
        volume: {}
      - name: persistentHome
        volume: {}

output:
  error: "addition of persistentHome volume would render DevWorkspace invalid: 1 error occurred:\n\t* duplicate key: persistentHome\n\n"
  workspace:
    components:
      - name: testing-container-1
        container:
          image: testing-image-1
          volumeMounts:
            - name: my-defined-volume
              path: /my-defined-volume-path
            - name: persistentHome
              path: /some/path
      - name: testing-container-2
        container:
          image: testing-image-2
          volumeMounts:
            - name: my-defined-volume
              path: /my-defined-volume-path
      - name: my-defined-volume
        volume: {}
      - name: persistentHome
        volume: {}
